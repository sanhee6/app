{"remainingRequest":"C:\\Users\\qinzh\\Desktop\\springboot133在线课程管理系统分离\\admin\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\qinzh\\Desktop\\springboot133在线课程管理系统分离\\admin\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\qinzh\\Desktop\\springboot133在线课程管理系统分离\\admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\qinzh\\Desktop\\springboot133在线课程管理系统分离\\admin\\src\\components\\common\\Editor.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\qinzh\\Desktop\\springboot133在线课程管理系统分离\\admin\\src\\components\\common\\Editor.vue","mtime":1748535622000},{"path":"C:\\Users\\qinzh\\Desktop\\springboot133在线课程管理系统分离\\admin\\babel.config.js","mtime":1621920998000},{"path":"C:\\Users\\qinzh\\Desktop\\springboot133在线课程管理系统分离\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1748415476000},{"path":"C:\\Users\\qinzh\\Desktop\\springboot133在线课程管理系统分离\\admin\\node_modules\\babel-loader\\lib\\index.js","mtime":1748415476000},{"path":"C:\\Users\\qinzh\\Desktop\\springboot133在线课程管理系统分离\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1748415476000},{"path":"C:\\Users\\qinzh\\Desktop\\springboot133在线课程管理系统分离\\admin\\node_modules\\vue-loader\\lib\\index.js","mtime":1748415476000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm51bWJlci5jb25zdHJ1Y3Rvci5qcyI7Ci8vIOW3peWFt+agj+mFjee9rgp2YXIgdG9vbGJhck9wdGlvbnMgPSBbWyJib2xkIiwgIml0YWxpYyIsICJ1bmRlcmxpbmUiLCAic3RyaWtlIl0sCi8vIOWKoOeylyDmlpzkvZMg5LiL5YiS57q/IOWIoOmZpOe6vwpbImJsb2NrcXVvdGUiLCAiY29kZS1ibG9jayJdLAovLyDlvJXnlKggIOS7o+eggQpbewogIGhlYWRlcjogMQp9LCB7CiAgaGVhZGVyOiAyCn1dLAovLyAx57qn5qCH6aKYClt7CiAgbGlzdDogIm9yZGVyZWQiCn0sIHsKICBsaXN0OiAiYnVsbGV0Igp9XSwKLy8g5pyJ5bqP44CB5peg5bqP5YiXClt7CiAgc2NyaXB0OiAic3ViIgp9LCB7CiAgc2NyaXB0OiAic3VwZXIiCn1dLAovLyDkuIrmoIcv5LiL5qCHClt7CiAgaW5kZW50OiAiLTEiCn0sIHsKICBpbmRlbnQ6ICIrMSIKfV0sCi8vIOe8qei/mwovLyBbeydkaXJlY3Rpb24nOiAncnRsJ31dLCAgICAgICAgICAgICAgICAgICAgICAgICAvLyDmlofmnKzmlrnlkJEKW3sKICBzaXplOiBbInNtYWxsIiwgZmFsc2UsICJsYXJnZSIsICJodWdlIl0KfV0sCi8vIOWtl+S9k+Wkp+WwjwpbewogIGhlYWRlcjogWzEsIDIsIDMsIDQsIDUsIDYsIGZhbHNlXQp9XSwKLy8g5qCH6aKYClt7CiAgY29sb3I6IFtdCn0sIHsKICBiYWNrZ3JvdW5kOiBbXQp9XSwKLy8g5a2X5L2T6aKc6Imy44CB5a2X5L2T6IOM5pmv6aKc6ImyClt7CiAgZm9udDogW10KfV0sCi8vIOWtl+S9k+enjeexuwpbewogIGFsaWduOiBbXQp9XSwKLy8g5a+56b2Q5pa55byPClsiY2xlYW4iXSwKLy8g5riF6Zmk5paH5pys5qC85byPClsibGluayIsICJpbWFnZSIsICJ2aWRlbyJdIC8vIOmTvuaOpeOAgeWbvueJh+OAgeinhumikQpdOwppbXBvcnQgeyBxdWlsbEVkaXRvciB9IGZyb20gInZ1ZS1xdWlsbC1lZGl0b3IiOwppbXBvcnQgInF1aWxsL2Rpc3QvcXVpbGwuY29yZS5jc3MiOwppbXBvcnQgInF1aWxsL2Rpc3QvcXVpbGwuc25vdy5jc3MiOwppbXBvcnQgInF1aWxsL2Rpc3QvcXVpbGwuYnViYmxlLmNzcyI7CmV4cG9ydCBkZWZhdWx0IHsKICBwcm9wczogewogICAgLyrnvJbovpHlmajnmoTlhoXlrrkqLwogICAgdmFsdWU6IHsKICAgICAgdHlwZTogU3RyaW5nCiAgICB9LAogICAgYWN0aW9uOiB7CiAgICAgIHR5cGU6IFN0cmluZwogICAgfSwKICAgIC8q5Zu+54mH5aSn5bCPKi8KICAgIG1heFNpemU6IHsKICAgICAgdHlwZTogTnVtYmVyLAogICAgICBkZWZhdWx0OiA0MDAwIC8va2IKICAgIH0KICB9LAogIGNvbXBvbmVudHM6IHsKICAgIHF1aWxsRWRpdG9yOiBxdWlsbEVkaXRvcgogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIGNvbnNvbGUubG9nKCdFZGl0b3Lnu4Tku7blt7LliJvlu7onLCB0aGlzLmFjdGlvbiwgdGhpcy52YWx1ZSA/IHRoaXMudmFsdWUuc3Vic3RyaW5nKDAsIDIwKSArICcuLi4nIDogJ+aXoOWGheWuuScpOwogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGNvbnRlbnQ6IHRoaXMudmFsdWUsCiAgICAgIHF1aWxsVXBkYXRlSW1nOiBmYWxzZSwKICAgICAgLy8g5qC55o2u5Zu+54mH5LiK5Lyg54q25oCB5p2l56Gu5a6a5piv5ZCm5pi+56S6bG9hZGluZ+WKqOeUu++8jOWImuW8gOWni+aYr2ZhbHNlLOS4jeaYvuekugogICAgICBlZGl0b3JPcHRpb246IHsKICAgICAgICBwbGFjZWhvbGRlcjogIiIsCiAgICAgICAgdGhlbWU6ICJzbm93IiwKICAgICAgICAvLyBvciAnYnViYmxlJwogICAgICAgIG1vZHVsZXM6IHsKICAgICAgICAgIHRvb2xiYXI6IHsKICAgICAgICAgICAgY29udGFpbmVyOiB0b29sYmFyT3B0aW9ucywKICAgICAgICAgICAgLy8gY29udGFpbmVyOiAiI3Rvb2xiYXIiLAogICAgICAgICAgICBoYW5kbGVyczogewogICAgICAgICAgICAgIGltYWdlOiBmdW5jdGlvbiBpbWFnZSh2YWx1ZSkgewogICAgICAgICAgICAgICAgaWYgKHZhbHVlKSB7CiAgICAgICAgICAgICAgICAgIC8vIOinpuWPkWlucHV05qGG6YCJ5oup5Zu+54mH5paH5Lu2CiAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIi5hdmF0YXItdXBsb2FkZXIgaW5wdXQiKS5jbGljaygpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgdGhpcy5xdWlsbC5mb3JtYXQoImltYWdlIiwgZmFsc2UpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAvLyBsaW5rOiBmdW5jdGlvbih2YWx1ZSkgewogICAgICAgICAgICAgIC8vICAgaWYgKHZhbHVlKSB7CiAgICAgICAgICAgICAgLy8gICAgIHZhciBocmVmID0gcHJvbXB0KCfor7fovpPlhaV1cmwnKTsKICAgICAgICAgICAgICAvLyAgICAgdGhpcy5xdWlsbC5mb3JtYXQoImxpbmsiLCBocmVmKTsKICAgICAgICAgICAgICAvLyAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgLy8gICAgIHRoaXMucXVpbGwuZm9ybWF0KCJsaW5rIiwgZmFsc2UpOwogICAgICAgICAgICAgIC8vICAgfQogICAgICAgICAgICAgIC8vIH0sCiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sCiAgICAgIGhlYWRlcjogewogICAgICAgICdUb2tlbic6ICcnCiAgICAgIH0gLy8g5pyJ55qE5Zu+54mH5pyN5Yqh5Zmo6KaB5rGC6K+35rGC5aS06ZyA6KaB5pyJdG9rZW4KICAgIH07CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKICAgIGNvbnNvbGUubG9nKCdFZGl0b3Lnu4Tku7blt7LmjILovb0nLCB0aGlzLmFjdGlvbik7CiAgICAvLyDnoa7kv53lnKjmjILovb3ml7bojrflj5bmnIDmlrDnmoRUb2tlbgogICAgdGhpcy51cGRhdGVUb2tlbigpOwoKICAgIC8vIOa3u+WKoOmUmeivr+WkhOeQhu+8jOmYsuatoue8lui+keWZqOWIneWni+WMluWksei0peWvvOiHtOaVtOS4qumhtemdouW0qea6gwogICAgdHJ5IHsKICAgICAgaWYgKHRoaXMuJHJlZnMubXlRdWlsbEVkaXRvcikgewogICAgICAgIGNvbnNvbGUubG9nKCdFZGl0b3Lnu4Tku7blvJXnlKg6JywgdGhpcy4kcmVmcy5teVF1aWxsRWRpdG9yKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjb25zb2xlLndhcm4oJ0VkaXRvcue7hOS7tuW8leeUqOS4jeWtmOWcqO+8jOWPr+iDveacquato+ehruWIneWni+WMlicpOwogICAgICAgIC8vIOWwneivleW7tui/n+WIneWni+WMlgogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgaWYgKF90aGlzLiRyZWZzLm15UXVpbGxFZGl0b3IpIHsKICAgICAgICAgICAgY29uc29sZS5sb2coJ0VkaXRvcue7hOS7tuW7tui/n+WIneWni+WMluaIkOWKnycpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgY29uc29sZS5lcnJvcignRWRpdG9y57uE5Lu25bu26L+f5Yid5aeL5YyW5aSx6LSlJyk7CiAgICAgICAgICB9CiAgICAgICAgfSwgNTAwKTsKICAgICAgfQogICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgIGNvbnNvbGUuZXJyb3IoJ0VkaXRvcue7hOS7tuWIneWni+WMlumUmeivrzonLCBlcnIpOwogICAgfQogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIC8vIOiuoeeul+WxnuaAp+eahCBnZXR0ZXIKICAgIGdldEFjdGlvblVybDogZnVuY3Rpb24gZ2V0QWN0aW9uVXJsKCkgewogICAgICB2YXIgdXJsID0gIi8iLmNvbmNhdCh0aGlzLiRiYXNlLm5hbWUsICIvIikgKyB0aGlzLmFjdGlvbjsKICAgICAgY29uc29sZS5sb2coJ0VkaXRvcuS4iuS8oFVSTDonLCB1cmwpOwogICAgICByZXR1cm4gdXJsOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgLy8g5pu05pawVG9rZW7mlrnms5UKICAgIHVwZGF0ZVRva2VuOiBmdW5jdGlvbiB1cGRhdGVUb2tlbigpIHsKICAgICAgdmFyIHRva2VuID0gdGhpcy4kc3RvcmFnZS5nZXQoIlRva2VuIik7CiAgICAgIGlmICh0b2tlbikgewogICAgICAgIHRoaXMuaGVhZGVyLlRva2VuID0gdG9rZW47CiAgICAgICAgY29uc29sZS5sb2coJ0VkaXRvciBUb2tlbuW3suabtOaWsDonLCB0b2tlbi5zdWJzdHJpbmcoMCwgMTApICsgJy4uLicpOwogICAgICB9IGVsc2UgewogICAgICAgIGNvbnNvbGUud2FybignRWRpdG9yIFRva2Vu5LiN5a2Y5Zyo77yM5LiK5Lyg5Yqf6IO95Y+v6IO95peg5rOV5q2j5bi45bel5L2cJyk7CiAgICAgIH0KICAgIH0sCiAgICBvbkVkaXRvckJsdXI6IGZ1bmN0aW9uIG9uRWRpdG9yQmx1cigpIHsKICAgICAgLy/lpLHljrvnhKbngrnkuovku7YKICAgICAgY29uc29sZS5sb2coJ0VkaXRvcuWkseWOu+eEpueCuScpOwogICAgfSwKICAgIG9uRWRpdG9yRm9jdXM6IGZ1bmN0aW9uIG9uRWRpdG9yRm9jdXMoKSB7CiAgICAgIC8v6I635b6X54Sm54K55LqL5Lu2CiAgICAgIGNvbnNvbGUubG9nKCdFZGl0b3LojrflvpfnhKbngrknKTsKICAgIH0sCiAgICBvbkVkaXRvckNoYW5nZTogZnVuY3Rpb24gb25FZGl0b3JDaGFuZ2UoKSB7CiAgICAgIGNvbnNvbGUubG9nKCdFZGl0b3LlhoXlrrnlj5jljJY6JywgdGhpcy52YWx1ZSA/IHRoaXMudmFsdWUuc3Vic3RyaW5nKDAsIDIwKSArICcuLi4nIDogJ+aXoOWGheWuuScpOwogICAgICAvL+WGheWuueaUueWPmOS6i+S7tgogICAgICB0aGlzLiRlbWl0KCJpbnB1dCIsIHRoaXMudmFsdWUpOwogICAgfSwKICAgIC8vIOWvjOaWh+acrOWbvueJh+S4iuS8oOWJjQogICAgYmVmb3JlVXBsb2FkOiBmdW5jdGlvbiBiZWZvcmVVcGxvYWQoKSB7CiAgICAgIC8vIOaYvuekumxvYWRpbmfliqjnlLsKICAgICAgY29uc29sZS5sb2coJ0VkaXRvcuWHhuWkh+S4iuS8oOWbvueJhycpOwogICAgICAvLyDkuIrkvKDliY3mo4Dmn6Xlubbmm7TmlrBUb2tlbgogICAgICB0aGlzLnVwZGF0ZVRva2VuKCk7CiAgICAgIHRoaXMucXVpbGxVcGRhdGVJbWcgPSB0cnVlOwogICAgfSwKICAgIHVwbG9hZFN1Y2Nlc3M6IGZ1bmN0aW9uIHVwbG9hZFN1Y2Nlc3MocmVzLCBmaWxlKSB7CiAgICAgIGNvbnNvbGUubG9nKCdFZGl0b3Llm77niYfkuIrkvKDmiJDlip86JywgcmVzKTsKICAgICAgLy8gcmVz5Li65Zu+54mH5pyN5Yqh5Zmo6L+U5Zue55qE5pWw57uECiAgICAgIC8vIOiOt+WPluWvjOaWh+acrOe7hOS7tuWunuS+iwogICAgICB2YXIgcXVpbGwgPSB0aGlzLiRyZWZzLm15UXVpbGxFZGl0b3IucXVpbGw7CiAgICAgIC8vIOWmguaenOS4iuS8oOaIkOWKnwogICAgICBpZiAocmVzLmNvZGUgPT09IDApIHsKICAgICAgICB0cnkgewogICAgICAgICAgLy8g6I635Y+W5YWJ5qCH5omA5Zyo5L2N572uCiAgICAgICAgICB2YXIgbGVuZ3RoID0gcXVpbGwuZ2V0U2VsZWN0aW9uKCkgPyBxdWlsbC5nZXRTZWxlY3Rpb24oKS5pbmRleCA6IDA7CiAgICAgICAgICAvLyDmj5LlhaXlm77niYcgIHJlcy51cmzkuLrmnI3liqHlmajov5Tlm57nmoTlm77niYflnLDlnYAKICAgICAgICAgIHF1aWxsLmluc2VydEVtYmVkKGxlbmd0aCwgImltYWdlIiwgdGhpcy4kYmFzZS51cmwgKyAidXBsb2FkLyIgKyByZXMuZmlsZSk7CiAgICAgICAgICAvLyDosIPmlbTlhYnmoIfliLDmnIDlkI4KICAgICAgICAgIHF1aWxsLnNldFNlbGVjdGlvbihsZW5ndGggKyAxKTsKICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0VkaXRvcuaPkuWFpeWbvueJh+mUmeivrzonLCBlcnIpOwogICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcigi5Zu+54mH5o+S5YWl5aSx6LSlOiAiICsgZXJyLm1lc3NhZ2UpOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCLlm77niYfmj5LlhaXlpLHotKUiKTsKICAgICAgfQogICAgICAvLyBsb2FkaW5n5Yqo55S75raI5aSxCiAgICAgIHRoaXMucXVpbGxVcGRhdGVJbWcgPSBmYWxzZTsKICAgIH0sCiAgICAvLyDlr4zmlofmnKzlm77niYfkuIrkvKDlpLHotKUKICAgIHVwbG9hZEVycm9yOiBmdW5jdGlvbiB1cGxvYWRFcnJvcihlcnIpIHsKICAgICAgLy8gbG9hZGluZ+WKqOeUu+a2iOWksQogICAgICBjb25zb2xlLmVycm9yKCdFZGl0b3Llm77niYfkuIrkvKDlpLHotKU6JywgZXJyKTsKICAgICAgdGhpcy5xdWlsbFVwZGF0ZUltZyA9IGZhbHNlOwogICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCLlm77niYfmj5LlhaXlpLHotKUiKTsKICAgIH0KICB9Cn07"},{"version":3,"names":["toolbarOptions","header","list","script","indent","size","color","background","font","align","quillEditor","props","value","type","String","action","maxSize","Number","default","components","created","console","log","substring","data","content","quillUpdateImg","editorOption","placeholder","theme","modules","toolbar","container","handlers","image","document","querySelector","click","quill","format","mounted","_this","updateToken","$refs","myQuillEditor","warn","setTimeout","error","err","computed","getActionUrl","url","concat","$base","name","methods","token","$storage","get","Token","onEditorBlur","onEditorFocus","onEditorChange","$emit","beforeUpload","uploadSuccess","res","file","code","length","getSelection","index","insertEmbed","setSelection","$message","message","uploadError"],"sources":["src/components/common/Editor.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <!-- 图片上传组件辅助-->\r\n    <el-upload\r\n      class=\"avatar-uploader\"\r\n      :action=\"getActionUrl\"\r\n      name=\"file\"\r\n      :headers=\"header\"\r\n      :show-file-list=\"false\"\r\n      :on-success=\"uploadSuccess\"\r\n      :on-error=\"uploadError\"\r\n      :before-upload=\"beforeUpload\"\r\n    ></el-upload>\r\n\r\n    <quill-editor\r\n      class=\"editor\"\r\n      v-model=\"value\"\r\n      ref=\"myQuillEditor\"\r\n      :options=\"editorOption\"\r\n      @blur=\"onEditorBlur($event)\"\r\n      @focus=\"onEditorFocus($event)\"\r\n      @change=\"onEditorChange($event)\"\r\n    ></quill-editor>\r\n  </div>\r\n</template>\r\n<script>\r\n// 工具栏配置\r\nconst toolbarOptions = [\r\n  [\"bold\", \"italic\", \"underline\", \"strike\"], // 加粗 斜体 下划线 删除线\r\n  [\"blockquote\", \"code-block\"], // 引用  代码\r\n  [{ header: 1 }, { header: 2 }], // 1级标题\r\n  [{ list: \"ordered\" }, { list: \"bullet\" }], // 有序、无序列\r\n  [{ script: \"sub\" }, { script: \"super\" }], // 上标/下标\r\n  [{ indent: \"-1\" }, { indent: \"+1\" }], // 缩进\r\n  // [{'direction': 'rtl'}],                         // 文本方向\r\n  [{ size: [\"small\", false, \"large\", \"huge\"] }], // 字体大小\r\n  [{ header: [1, 2, 3, 4, 5, 6, false] }], // 标题\r\n  [{ color: [] }, { background: [] }], // 字体颜色、字体背景颜色\r\n  [{ font: [] }], // 字体种类\r\n  [{ align: [] }], // 对齐方式\r\n  [\"clean\"], // 清除文本格式\r\n  [\"link\", \"image\", \"video\"] // 链接、图片、视频\r\n];\r\n\r\nimport { quillEditor } from \"vue-quill-editor\";\r\nimport \"quill/dist/quill.core.css\";\r\nimport \"quill/dist/quill.snow.css\";\r\nimport \"quill/dist/quill.bubble.css\";\r\n\r\nexport default {\r\n  props: {\r\n    /*编辑器的内容*/\r\n    value: {\r\n      type: String\r\n    },\r\n    action: {\r\n      type: String\r\n    },\r\n    /*图片大小*/\r\n    maxSize: {\r\n      type: Number,\r\n      default: 4000 //kb\r\n    }\r\n  },\r\n\r\n  components: {\r\n    quillEditor\r\n  },\r\n  \r\n  created() {\r\n    console.log('Editor组件已创建', this.action, this.value ? this.value.substring(0, 20) + '...' : '无内容');\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      content: this.value,\r\n      quillUpdateImg: false, // 根据图片上传状态来确定是否显示loading动画，刚开始是false,不显示\r\n      editorOption: {\r\n        placeholder: \"\",\r\n        theme: \"snow\", // or 'bubble'\r\n        modules: {\r\n          toolbar: {\r\n            container: toolbarOptions,\r\n            // container: \"#toolbar\",\r\n            handlers: {\r\n              image: function(value) {\r\n                if (value) {\r\n                  // 触发input框选择图片文件\r\n                  document.querySelector(\".avatar-uploader input\").click();\r\n                } else {\r\n                  this.quill.format(\"image\", false);\r\n                }\r\n              }\r\n              // link: function(value) {\r\n              //   if (value) {\r\n              //     var href = prompt('请输入url');\r\n              //     this.quill.format(\"link\", href);\r\n              //   } else {\r\n              //     this.quill.format(\"link\", false);\r\n              //   }\r\n              // },\r\n            }\r\n          }\r\n        }\r\n      },\r\n      header: {\r\n        'Token': ''\r\n      }, // 有的图片服务器要求请求头需要有token\r\n    };\r\n  },\r\n  \r\n  mounted() {\r\n    console.log('Editor组件已挂载', this.action);\r\n    // 确保在挂载时获取最新的Token\r\n    this.updateToken();\r\n    \r\n    // 添加错误处理，防止编辑器初始化失败导致整个页面崩溃\r\n    try {\r\n      if (this.$refs.myQuillEditor) {\r\n        console.log('Editor组件引用:', this.$refs.myQuillEditor);\r\n      } else {\r\n        console.warn('Editor组件引用不存在，可能未正确初始化');\r\n        // 尝试延迟初始化\r\n        setTimeout(() => {\r\n          if (this.$refs.myQuillEditor) {\r\n            console.log('Editor组件延迟初始化成功');\r\n          } else {\r\n            console.error('Editor组件延迟初始化失败');\r\n          }\r\n        }, 500);\r\n      }\r\n    } catch (err) {\r\n      console.error('Editor组件初始化错误:', err);\r\n    }\r\n  },\r\n  \r\n  computed: {\r\n    // 计算属性的 getter\r\n    getActionUrl: function() {\r\n      const url = `/${this.$base.name}/` + this.action;\r\n      console.log('Editor上传URL:', url);\r\n      return url;\r\n    }\r\n  },\r\n  methods: {\r\n    // 更新Token方法\r\n    updateToken() {\r\n      const token = this.$storage.get(\"Token\");\r\n      if (token) {\r\n        this.header.Token = token;\r\n        console.log('Editor Token已更新:', token.substring(0, 10) + '...');\r\n      } else {\r\n        console.warn('Editor Token不存在，上传功能可能无法正常工作');\r\n      }\r\n    },\r\n    \r\n    onEditorBlur() {\r\n      //失去焦点事件\r\n      console.log('Editor失去焦点');\r\n    },\r\n    onEditorFocus() {\r\n      //获得焦点事件\r\n      console.log('Editor获得焦点');\r\n    },\r\n    onEditorChange() {\r\n      console.log('Editor内容变化:', this.value ? this.value.substring(0, 20) + '...' : '无内容');\r\n      //内容改变事件\r\n      this.$emit(\"input\", this.value);\r\n    },\r\n    // 富文本图片上传前\r\n    beforeUpload() {\r\n      // 显示loading动画\r\n      console.log('Editor准备上传图片');\r\n      // 上传前检查并更新Token\r\n      this.updateToken();\r\n      this.quillUpdateImg = true;\r\n    },\r\n\r\n    uploadSuccess(res, file) {\r\n      console.log('Editor图片上传成功:', res);\r\n      // res为图片服务器返回的数组\r\n      // 获取富文本组件实例\r\n      let quill = this.$refs.myQuillEditor.quill;\r\n      // 如果上传成功\r\n      if (res.code === 0) {\r\n        try {\r\n          // 获取光标所在位置\r\n          let length = quill.getSelection() ? quill.getSelection().index : 0;\r\n          // 插入图片  res.url为服务器返回的图片地址\r\n          quill.insertEmbed(length, \"image\", this.$base.url+ \"upload/\" +res.file);\r\n          // 调整光标到最后\r\n          quill.setSelection(length + 1);\r\n        } catch (err) {\r\n          console.error('Editor插入图片错误:', err);\r\n          this.$message.error(\"图片插入失败: \" + err.message);\r\n        }\r\n      } else {\r\n        this.$message.error(\"图片插入失败\");\r\n      }\r\n      // loading动画消失\r\n      this.quillUpdateImg = false;\r\n    },\r\n    // 富文本图片上传失败\r\n    uploadError(err) {\r\n      // loading动画消失\r\n      console.error('Editor图片上传失败:', err);\r\n      this.quillUpdateImg = false;\r\n      this.$message.error(\"图片插入失败\");\r\n    }\r\n  }\r\n};\r\n</script> \r\n\r\n<style>\r\n.editor {\r\n  line-height: normal !important;\r\n}\r\n.ql-snow .ql-tooltip[data-mode=\"link\"]::before {\r\n  content: \"请输入链接地址:\";\r\n}\r\n.ql-snow .ql-tooltip.ql-editing a.ql-action::after {\r\n  border-right: 0px;\r\n  content: \"保存\";\r\n  padding-right: 0px;\r\n}\r\n\r\n.ql-snow .ql-tooltip[data-mode=\"video\"]::before {\r\n  content: \"请输入视频地址:\";\r\n}\r\n.ql-container {\r\n\theight: 400px;\r\n}\r\n\r\n.ql-snow .ql-picker.ql-size .ql-picker-label::before,\r\n.ql-snow .ql-picker.ql-size .ql-picker-item::before {\r\n  content: \"14px\";\r\n}\r\n.ql-snow .ql-picker.ql-size .ql-picker-label[data-value=\"small\"]::before,\r\n.ql-snow .ql-picker.ql-size .ql-picker-item[data-value=\"small\"]::before {\r\n  content: \"10px\";\r\n}\r\n.ql-snow .ql-picker.ql-size .ql-picker-label[data-value=\"large\"]::before,\r\n.ql-snow .ql-picker.ql-size .ql-picker-item[data-value=\"large\"]::before {\r\n  content: \"18px\";\r\n}\r\n.ql-snow .ql-picker.ql-size .ql-picker-label[data-value=\"huge\"]::before,\r\n.ql-snow .ql-picker.ql-size .ql-picker-item[data-value=\"huge\"]::before {\r\n  content: \"32px\";\r\n}\r\n\r\n.ql-snow .ql-picker.ql-header .ql-picker-label::before,\r\n.ql-snow .ql-picker.ql-header .ql-picker-item::before {\r\n  content: \"文本\";\r\n}\r\n.ql-snow .ql-picker.ql-header .ql-picker-label[data-value=\"1\"]::before,\r\n.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\"1\"]::before {\r\n  content: \"标题1\";\r\n}\r\n.ql-snow .ql-picker.ql-header .ql-picker-label[data-value=\"2\"]::before,\r\n.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\"2\"]::before {\r\n  content: \"标题2\";\r\n}\r\n.ql-snow .ql-picker.ql-header .ql-picker-label[data-value=\"3\"]::before,\r\n.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\"3\"]::before {\r\n  content: \"标题3\";\r\n}\r\n.ql-snow .ql-picker.ql-header .ql-picker-label[data-value=\"4\"]::before,\r\n.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\"4\"]::before {\r\n  content: \"标题4\";\r\n}\r\n.ql-snow .ql-picker.ql-header .ql-picker-label[data-value=\"5\"]::before,\r\n.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\"5\"]::before {\r\n  content: \"标题5\";\r\n}\r\n.ql-snow .ql-picker.ql-header .ql-picker-label[data-value=\"6\"]::before,\r\n.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\"6\"]::before {\r\n  content: \"标题6\";\r\n}\r\n\r\n.ql-snow .ql-picker.ql-font .ql-picker-label::before,\r\n.ql-snow .ql-picker.ql-font .ql-picker-item::before {\r\n  content: \"标准字体\";\r\n}\r\n.ql-snow .ql-picker.ql-font .ql-picker-label[data-value=\"serif\"]::before,\r\n.ql-snow .ql-picker.ql-font .ql-picker-item[data-value=\"serif\"]::before {\r\n  content: \"衬线字体\";\r\n}\r\n.ql-snow .ql-picker.ql-font .ql-picker-label[data-value=\"monospace\"]::before,\r\n.ql-snow .ql-picker.ql-font .ql-picker-item[data-value=\"monospace\"]::before {\r\n  content: \"等宽字体\";\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]}]}